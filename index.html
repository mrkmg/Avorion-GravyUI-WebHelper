<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="./main.css?2" />
        <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    </head>
    <body>
        <table id="layout">
            <tr>
                <td colspan="3" style="height: 30px; border-bottom: solid grey 2px">
                    <table style="width: 100%;">
                        <tr>
                            <td style="width: 120px; white-space: nowrap;">Load a Script:</td>
                            <td style="width: 200px; white-space: nowrap;">
                                <select id="selector">
                                    <option value="">[New File]</option>
                                    <optgroup label="User">
                                    </optgroup>
                                    <optgroup label="Examples">
                                        <option value="examples/showcase.lua">examples/showcase.lua</option>
                                        <option value="examples/orderbook.lua">examples/orderbook.lua</option>
                                        <option value="examples/windmill.lua">examples/windmill.lua</option>
                                        <option value="examples/dialog.lua">examples/dialog.lua</option>
                                        <option value="examples/extending.lua">examples/extending.lua</option>
                                        <option value="examples/face.lua">examples/face.lua</option>
                                        <option value="examples/tradingui.lua">examples/tradingui.lua</option>
                                    </optgroup>
                                    <optgroup label="GravyUI Library">
                                        <option value="gravyui/node.lua">gravyui/node.lua</option>   
                                        <option value="gravyui/plugins/resizing.lua">gravyui/plugins/resizing.lua</option>
                                        <option value="gravyui/plugins/splitting.lua">gravyui/plugins/splitting.lua</option>
                                        <option value="gravyui/plugins/translating.lua">gravyui/plugins/translating.lua</option>
                                    </optgroup>
                                 </select>
                            </td>
                            <td><button id="delete">X</button></td>
                            <td style="white-space: nowrap">Save Name:</td>
                            <td style="white-space: nowrap;">
                                user/<input style="width: 80px" id="savename" />.lua
                            </td>
                            <td style="width: 100%; text-align: center; font-weight: bold;">GravyUI Layout Playground</td>
                            <td style="width: 300px; text-align: right;"><button onclick="javascript:toggleHelp()">Help!</button></td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td id="leftCol">
                    <div class="allower">
                        <div id="input"></div>
                    </div>
                </td>
                <td id="dragger"></td>
                <td id="rightCol">
                    <canvas id="render"></canvas>
                </td>
            </tr>
        </table>
        <div id="overlay"></div>
        <div id="help">
            <div class="close" onclick="javascript:toggleHelp()">❌</div>
            <div class="help-body">
                <h1>GravyUI Layout Playground</h1>
                <p>
                    <strong>What is this?</strong> It's a tool to assist you in developing a layout using GravyUI. Docs for how to use GravyUI are at:
                    <a href="https://github.com/mrkmg/AvorionMods/tree/master/GravyUI">GitHub</a>
                </p>
                <p>
                    <strong>What is GravyUI?</strong> A layout generating library compatible with and made for modding in Avorion.
                </p>
                <p>
                    <strong>How does this work?</strong> To the left is an editor. As you type, the lua is interpreted, and its result is drawn to the right.
                    This is a full lua environment with some mocked Avorion types (vec2, rect) and a few functions to render in the browser.
                </p>
                <p>
                    Place all draw commands in a "main"
                    function. While this isn't needed, it
                    helps with loading order and to keep
                    your work tidy.
                </p>

                <p>Use the "Load a Script" at the top to see some examples.</p>
    
                <h2>Built in functions</h2>
    
<pre>
x, y = getResolution()
DrawRect(node[, color])
DrawRects(color, node, node, ...)
DrawText(node, text[, color[, size]])
DrawTextL(node, text[, color[, size]])
Rect(vec2, vec2)
vec2(x, y)
</pre>

                <h2>Globals</h2>

<pre>
FONTCOLOR = 'black' -- Default font color
</pre>

                <p>Made by Kevin Gravier (Gravy) in 2020 under the MIT license with love ♥</p>

            </div>
        </div>
        <script src="vendor/fengari-web.js" type="text/javascript"></script>
        <script src="./vendor/monaco/min/vs/loader.js" type="text/javascript"></script>
        <script type="text/javascript">
            require.config({ paths: {
                'vs': 'vendor/monaco/min/vs'
            }, basePath: "./"});
            require(["js/main"], () => 0)
        </script>
    </body>
</html>